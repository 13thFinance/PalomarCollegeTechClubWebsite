<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Palomar Tech Club: Hacking</title>
        <meta name="description" content="Palomar Tech Club">
        <link rel="stylesheet" href="../main.css">
        
        <!-- for modal images-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>
        
        <h1>PALOMAR TECH CLUB</h1>
        <!--------------------sidenav---------------------------------------------->
        <ul>
        <li><a class="active" href="../index.html">Home</a></li>
        <li><a href="hack.html">Hack: Intro</a></li>
        <li><a href="hack2/hack2.html">Hack: Metasploitable</a></li>
            <li><a class="redBackground" href="hackWifi_wpa2.html">Hack: Wifi WPA2 </a></li>
            <li><a href="grep.html">Grep</a></li>
        </ul>
        <!--------------------end sidenav ------------------------------------------>
        
        <!-------------------article------------------------------------------------>
        
        <div style="margin-left:15%;padding:1px 16px;height:100%;padding-top:2%;">
            <h1>Wifi Hacking</h1>
             <article>
                 <h2>Hacking Wifi: WPA2 Password Cracking</h2>
                 <p>In the beggining there was WEP passwords. But then it was bullied to death. So now we have WPA2. WPA2 is a secure encryption system for wireless networks. WPA2 implements Counter Mode with Cipher Black Chaining Message Authentication which will be know as CCMP. CCMP was bult using the strict guidelines of Advanced Encryption Standard(AES). Sounds fancy right? Makes it sound really hard to hack yeah? Nah fam. And the best part is that everyone uses this insecure protocol.</p>
            </article>
            
            <article>
                <h2 >Words to know:</h2>
                <div>
                    <li>SSID: Name of Wifi emmiting device(router name ie. "FBI Van")</li>
                    <li>AP: Access Point(Thing that emits internet)</li>
                    <li>PSK: Pre-shared key(The Wifi password in this case)</li>
                    <li>MAC: Machine Adress Code(weird numer that identifies the hardware of a device)</li>
                    <li>Wordlist: A text file with words in it. Usually possible passwords</li>
                    <li>Dictionary: See Above</li>
                </div>
            </article>
            
            <article>
                <h2>Technical details: The "boring" stuff</h2>
                <p>The question to understand is: How does a Wifi connection happen? You technically don't need to know this part as long as you know the process on how to crack Wifi, but it is good to see how systems are made in order to spot vulnerabilities. And so if you want to learn how to crack wifi skip this, if you want to know how to hack Wifi, read this.</p>
                
                <p>The WPA/WPA2 Connection process is the vulnerable part of the wireless security process. The connection process consist of four general step steps(also known as a four-way handshake):</p>
                <div>
                    <li>ANonce</li>
                    <li>SNonce + MIC</li>
                    <li>GTK + MIC</li>
                    <li>Ack</li>
                </div>
                <p>Before the 4-way handshake is started you and the access point(Wifi thingy) get a Pairwise Master Key(PMK), which does not change until the session ends. The PMK is not used for encryption itself, but it is used in the four-way handshake mentioned above. A PMK is generated by the followings being fed into a hashing algorithm:</p>
                <div>
                    <li>The Passphrase(preshared key or PSK)</li>
                    <li>The access point SSID</li>
                    <li>The SSID length</li>
                    <li>Number of hashing iterations</li>
                    <li>The PMK length(usually 256 bits)</li>
                </div>
                <p>If you noticed the PMK contains the PSK aka the password. The PMK(the thing that contains the password and the above stuff) gets fed into a hashing algorithm  called PBKDF2 to create the PMK. So in summary:</p>
                
                <p style="text-align: center;font-weight: bold" >Stuff above -> PMK -> Four-way Handshake</p>
                <p>There are more steps to talk about if we had wanted to do man-in-the-middle attacks and the like but in rough summary, after a correct PMK is sent, the access point(AP) generates a Pairwise Transient Key(PTK) which is used to encrypt traffic between the AP and the client(the Wifi user). A Group Transient Key is exchanged and that is used to encrypt broadcast traffic. These are used in the handshake process to ecrypt data. But we don't care about data, we only want Internet... for now.</p>
            </article>
            
            <article>
                <h2>Process: The actual hacking part</h2>
                <p>If you remember correctly to crack Wifi, we need to solve for the password. We need to know what the password is in order to get that sweet sweet internet access. To guess a password we first need to capture a four-way handshake for analysis. We will have a program do this. If we know the correct password and the SSID, we can feed this into the PBKDF2 hashing algorithm to generate a PMK. We still need the ANonce, SNonce, and the MAC of the AP and a legitimate client to calculate the PTK. The PTK is unique for the user because the Nonces will differ, but if we can capture a four-way handshake we can use the clients MAC address to calculate the PTK for a given passphrase.</p>
                
                <p>In example: We can use an SSID and the passphrase "password" to generate a PMK, then combine the generated PMK with the captured Nonces, and the MAC addresse from the client to calculate the PTK. Finally if the MICs match the ones on the captured handshake with our generated ones, we know the password that we used to generate the PTK is the AP's password... Whooo, that's alot of tech jargon. But you made it this far, so we will make a computer do this for us AUTOMATICALLY. We will use Aircrack-ng pogram families to take of our issue.</p>
                
                <!-- video -->
                <div style="text-align: center">
                    <h2 >Video Walkthough</h2>
                
                    <iframe style="overflow: hidden;height: 500px;width: 75%" allowFullScreen="allowFullScreen" frameBorder="0" src="https://www.youtube.com/embed/tbAhDjsuccg"></iframe>
                </div>
                
                
                <h3>Boot up Kali</h3>
                <h5 style="background-color: darkorange">Capturing the handshake</h5>
                <p style="padding: 1%">First find out what the name of your wireless card is called. You can do this by typing on a terminal:</p>
                <ol style="font-weight: bolder;padding-left: 3%;background-color: darkred">
                    <li>ifconfig</li>
                </ol>
                
                
                
                
                <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/1_ifconfig.png" alt="ifconfig is useful I guess..." onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                    
                    <script src="../script.js"></script>
                </div>
                
                

                <p style="padding-top: 1%">It should look something like wlan0 or wlan1 if you're using a usb dongle. </p>
                
                <p>Once you know the name of your interface card, you need to find a target. >:)</p>
                <p>To scan for a target you need to start monitoring the airwaves. We will use airmon-ng. On kali type:</p>
                <ol style="font-weight: bolder;padding-left: 3%;background-color: darkred">
                    <li>airmon-ng start wlan0(or whatever your thing is called)</li>
                </ol>
                
                
                 
                <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/2_airmon_start.png" alt="mon stands for monitor..." class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                 <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/3_airmon_start_after.png" alt="wlanmaaaaaaaaannn" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                
                
                
                
                <p>This will force your card to start monitoring the airwaves. It also renames your card, usually to something like wlan0mon adding mon at the end to symbolize it is monitoring and that you are a monster. Jk. If you want to double check the name, type ifconfig again. </p>
                <p style="padding-top: 1%">Now to see your targets we will use airodump-ng, on a terminal type:</p>
                
                <ol style="font-weight: bolder;padding-left: 3%;background-color: darkred">
                    <li>airodump-ng [interface card]</li>
                </ol>
                
                
                 <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/4_scan_for_target.png" alt="airodump... my doods" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/5_scan_for_target2.png" alt="many wifi" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                
                <p>After you find your target you want to record(or copy-paste) the BSSID somewhere for later use. If the screen is going crazy you can press 'r' to disable automatic reorganization. Also get the channel that the AP is on.</p>
                
                <p>After you have what you want, kill the program using ctrl-c. And type the following command, putting the pertinent information inside the [ ] and without the [ ]:</p>
                
                 <ol style="font-weight: bolder;padding-left: 3%;background-color: darkred">
                    <li>airodump-ng -c [channel] --bssid [the BSSID of the AP] -w [capture file name] [network card]</li>
                </ol>
                
                  <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/6_focu_on_target.png" alt="*insert text here*" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                  <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/7_focus_on_target2.png" alt="that annoying background text file..." class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                
                
                <p>What this command does is it focuses the airodump-ng program onto a specific AP and also starts recording any handshakes that might take place, it writes it to the file name you specified. Leave this running for now.</p>
                
                <p style="padding-top: 1%">Now... to capture a handshake. You can wait for a user to connect... which might take a whlle. Or you can kick em of using a deauth attack. Which sounds cooler?</p>
                <p>To launch a deauth attack you first must open a new terminal. on that new terminal type:</p>
                
                <ol style="font-weight: bolder;padding-left: 3%;background-color: darkred">
                    <li>aireplay-ng -0 [# of attacks] -a [BSSID of AP] -c [BSSID of target client to diconnect] [interface card]</li>
                </ol>
                
                  <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/8_deauth.png" alt="deauth to all traitors!" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                 
                
                <p>If the airodump-ng program you have on the side captures a fourway-handshake it will record it in the first line of the captured output.</p>
                 <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/9_handshake.png" alt="*whispers* I'm *bites tongues mid-sentence* in..." class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                <p>Once you have gotten a handshake, close airodump-ng.</p>
                
                
                <p>Check that there are four files in the directory you ran airodump-ng if not airodump-ng lied about capturing the handshake. At this point you can be "offline", and all you need to do is crack the password.</p>
                
                 <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/10_checkCaptures.png" alt="ceck your work" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                <p style="padding-top: 3%"></p>
                <h5 style="background-color: darkorange;">Cracking the password</h5>
                <p style="padding-top: 2%">Once you have the four way handshake captured you can crack the password by using aircrack-ng. You will need a wordlist which you can google and download from the internet. I recommend using rockyou.txt or google10000.lst. Once you have a list type:</p>
                <ol style="font-weight: bolder;padding-left: 3%;background-color: darkred">
                    <li>aircrack-ng -w [wordlist] --bssid [BSSID of the AP] [capture filename]*.cap</li>
                </ol>
                
                
                <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/11_dictionary.png" alt="get a dictionary" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/12_cracking.png" alt="here... we... go!" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                <!-- image div with modal -->
                <div>
                    <!-- Trigger the Modal -->
                    <img class="myImg" src="hackWifi_WPA2_images/13_cracked.png" alt="150%" class="centerimage" onclick="modal()">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">

                      <!-- The Close Button -->
                      <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                      <!-- Modal Content (The Image) -->
                      <img class="modal-content" id="img01">

                      <!-- Modal Caption (Image Text) -->
                      <div id="caption"></div>
                    </div>
                </div>
                
                
                <p>If your wordlist contains the password it will tell you. And thats it.</p>
                
                 
                
                <p style="padding-top: 3%"></p>
                <h5 style="background-color: darkorange;">Weaknesses</h5>
                <p>Some downsides of using the aircrack-ng suite of tools is the lack of automation and the fact that it does not take full advantage of your computer hardware. Aircrack uses by default on the CPU power so the better your the CPU the less time you'll have to wait. But CPUs are comparatively slow when put against graphics cards. Graphics cards are the way to go if you do this often. Another downside of aircrack-ng is the lack of wordlist modifiers. For example if your wordlist contains the password "password" but the actual password for the AP was "pa$$word" then youre straight out of luck. There's also the part where you literally kick someone off the network... someone might notice that. So it can be slow sometimes. Luckily there are many of password cracking tools(noteably hashcat and hydra) out there that are more efficient and that will be on another guide... when I get to it.</p>
            </article>
            
        </div>
        <!-------------------end article-------------------------------------------->
        <center>
            <h1>
                <a href="hack2/hack2.html" style="padding:1%;">PREV PAGE</a>
                <a href="grep.html" style="padding:1%;">NEXT PAGE</a>
            </h1>
        </center>

        <center>
      <div style="margin:auto;padding:5%">
            <a href="http://www2.palomar.edu/">
                <img style="padding-left: 15%" alt="Join the Palomar Tech Club!" src="../mainpageImages/palocollegebanner.png" />
            </a>
        </div>
            </center>
        <div style="margin:auto;"><p style="background: black;text-align:right;">PalomarTechClub2017@mainline_server Felix-"Reach for the Sun!"</p></div>
    </body>
</html>